<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Replay</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png?v=2" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2" />
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- iOS Web App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Replay" />
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#000000" />

    <!-- OneSignal Web SDK -->
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      (function () {
        const allowedOrigins = [
          'https://replay.agrix.ai',
          'https://localhost:5173',
          'http://localhost:5173'
        ];

        const currentOrigin = window.location.origin;
        const isLocalhost = currentOrigin.includes('localhost');

        if (!allowedOrigins.includes(currentOrigin)) {
          console.info('[OneSignal] Initialization skipped for origin:', currentOrigin);
          return;
        }

        window.OneSignalDeferred = window.OneSignalDeferred || [];
        window.OneSignalDeferred.push(async function (OneSignal) {
          await OneSignal.init({
            appId: 'ecceb7b1-6964-4c15-96ce-5b64aaee1f16',
            safari_web_id: 'web.onesignal.auto.03c56528-3ec2-4727-882a-5ccb48032a98',
            notifyButton: {
              enable: true,
            },
            allowLocalhostAsSecureOrigin: isLocalhost,
          });
        });
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
